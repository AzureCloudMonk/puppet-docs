<div>
<blockquote>
  <p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <img src="/pe/2015.4/images/windows-logo-small.jpg" alt="windows logo"> このセクションでは、*nixオペレーティングシステムについて取り上げます。
</div>
</div>
</div>
</div>
</div>
</div> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> WindowsへのPuppet Enterpriseのインストールについては、「<a href="./install_windows.html">Windows agentのインストール</a>」を参照してください。
</div>
</div>
</div>
</div>
</div>
</div>

</blockquote>

<h2 id="downloading-puppet-enterprise">Puppet Enterpriseをダウンロードする</h2>

<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> まず、PuppetのWebサイトから、最新バージョンのPuppet EnterpriseのtarballとGPG署名(「.asc」ファイル)を<a href="http://info.puppetlabs.com/download-pe.html">ダウンロード</a>します。
</div>
</div>
</div>
</div>
</div>
</div>


<h3 id="choosing-an-installer-tarball">インストーラTarballを選択する</h3>

<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> ご利用のOSバージョンとアーキテクチャに合ったPuppet Enterpriseのtarballを選択してください。
</div>
</div>
</div>
</div>
</div>
</div>


<h4 id="available-nix-tarballs">*nix向けtarball</h4>

<table>
<thead><tr>
<th>ファイル名の末尾</th>
      <th>インストール対象の環境</th>
    </tr></thead>
<tbody>
<tr>
<td><code>-el-&lt;version and arch&gt;.tar.gz</code></td>
      <td>RHEL、CentOS、Scientific Linux、またはOracle Linux</td>
    </tr>
<tr>
<td><code>-ubuntu-&lt;version and arch&gt;.tar.gz</code></td>
      <td>Ubuntu LTS</td>
    </tr>
<tr>
<td><code>-sles-&lt;version and arch&gt;.tar.gz</code></td>
      <td>SLES</td>
    </tr>
</tbody>
</table>
<h3 id="verifying-the-installer">インストーラを検証する</h3>

<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> Puppet Enterpriseインストーラを検証するには、Puppetの公開鍵をインポートし、ダウンロードしたtarballの暗号検証を実行します。
</div>
</div>
</div>
</div>
</div>
</div> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> Puppetの公開鍵は、Puppetによって証明されており、<code>pgp.mit.edu</code>などの公開鍵サーバー、およびPuppetから入手できます。
</div>
</div>
</div>
</div>
</div>
</div> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> GnuPGをインストールし、PE tarballと共にGPG署名(「.asc」ファイル)をダウンロードする必要があります。
</div>
</div>
</div>
</div>
</div>
</div>


<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> Puppetの公開鍵をインポートするには、次のコマンドを実行します。
</div>
</div>
</div>
</div>
</div>
</div>


<pre><code>wget -O - https://downloads.puppetlabs.com/puppet-gpg-signing-key.pub | gpg --import
</code></pre>

<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> 以下のような結果が表示されます。
</div>
</div>
</div>
</div>
</div>
</div>


<pre><code>gpg: key EF8D349F: public key "Puppet, Inc. Release Key (Puppet, Inc. Release Key) &lt;release@puppet.com&gt;" imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)
</code></pre>

<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> 公開鍵のフィンガープリントを出力するには、次のコマンドを実行します。
</div>
</div>
</div>
</div>
</div>
</div>


<pre><code>gpg --fingerprint 0x7F438280EF8D349F
</code></pre>

<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> 検証の際に表示されるフィンガープリントと、ここで表示されるPuppetのフィンガープリントは完全に一致しなければなりません。
</div>
</div>
</div>
</div>
</div>
</div>


<pre><code>Primary key fingerprint: 6F6B 1550 9CF8 E59E 6E46  9F32 7F43 8280 EF8D 349F
</code></pre>

<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> 次に、以下のコマンドを実行してtarballのリリース署名を検証します。
</div>
</div>
</div>
</div>
</div>
</div>


<pre><code>$ gpg --verify puppet-enterprise-&lt;version&gt;-&lt;platform&gt;.tar.gz.asc
</code></pre>

<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> 以下のような結果が表示されます。
</div>
</div>
</div>
</div>
</div>
</div>


<pre><code>gpg: Signature made Tue 18 Sep 2016 10:05:25 AM PDT using RSA key ID EF8D349F
gpg: Good signature from "Puppet, Inc. Release Key (Puppet, Inc. Release Key)"
</code></pre>

<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <strong>注意</strong>: 署名を検証する際、リリース鍵の署名の1つへの信頼できるパスがない場合は、以下のような警告メッセージが表示されます。
</div>
</div>
</div>
</div>
</div>
</div>


<pre><code>Could not find a valid trust path to the key.
    gpg: WARNING: This key is not certified with a trusted signature!
    gpg: There is no indication that the signature belongs to the owner.
</code></pre>

<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> これは、リリース鍵に署名したユーザーを証明できる信頼できるパスが作成されていないためです。この警告は無視してかまいません。
</div>
</div>
</div>
</div>
</div>
</div>


<h2 id="installing-puppet-enterprise">Puppet Enterpriseのインストール</h2>

<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> 以下では、Puppet Enterpriseをスムーズにインストールするために知っておくべきことを説明します。
</div>
</div>
</div>
</div>
</div>
</div> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> Puppet Enterpriseの機能は複数のコンポーネントにより構成されています。インストーラを実行すると、これらすべてのコンポーネントがインストールされ、設定されます。
</div>
</div>
</div>
</div>
</div>
</div> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> 複数のコンポーネントを1つのノードにインストール（モノシックインストール）、もしくは複数のノードにコンポーネントを分散してインストール（分割インストール）することができます。ただしagentコンポーネントについては、すべてのノードにインストールされます。
</div>
</div>
</div>
</div>
</div>
</div>


<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> インストールを始める前に、デプロイするものを決めておきましょう。
</div>
</div>
</div>
</div>
</div>
</div> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> Puppet Enterpriseコンポーネントをインストールするすべてのノードにアクセスできるよう、各ノードの完全修飾ドメイン名を把握し、ファイアウォールのルールが<a href="./sys_req_sysconfig.html#firewall-configuration">必要なポート</a>にアクセスできるよう設定されているか確認する必要があります。
</div>
</div>
</div>
</div>
</div>
</div>


<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> これらの情報を確認した後、次の<strong>三つの手順</strong>でインストールを実行します。
</div>
</div>
</div>
</div>
</div>
</div>


<ol>
<li>
    <p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> インストール方法を選択します。
</div>
</div>
</div>
</div>
</div>
</div>

  </li>
  <li>
    <p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> Puppet Enterpriseの主要コンポーネント、すなわち、Puppet master、PuppetDB (およびデータベースサポート)、PEコンソールをインストールします。
</div>
</div>
</div>
</div>
</div>
</div>

  </li>
  <li>
    <p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> Puppet Enterpriseによる管理を行うすべてのノードに、Puppet agentをインストールします。
</div>
</div>
</div>
</div>
</div>
</div> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> 「<a href="./install_agents.html">agentのインストール手順</a>」を参照してください。
</div>
</div>
</div>
</div>
</div>
</div>

  </li>
</ol>
<h3 id="choose-an-installation-method">インストール方法の選択</h3>

<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> 開始する前に、インストール方法を選択します。
</div>
</div>
</div>
</div>
</div>
</div> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> いくつかの選択肢を提供しています。また、それぞれに対応するインストール手順へのリンクも提供しています。
</div>
</div>
</div>
</div>
</div>
</div>


<ul>
<li>
    <p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <a href="./install_pe_mono.html">GUIによるモノリシックインストール</a>: <a href="./sys_req_hw.html#monolithic-installation">標準モノリシックインストール</a>または<a href="./sys_req_hw.html#monolithic-plus-compile-masters-installation">モノリシックインストールにコンパイルmasterを追加する場合</a>の土台となるインストール方法。
</div>
</div>
</div>
</div>
</div>
</div>

  </li>
  <li>
    <p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <a href="./install_pe_split.html">GUIによる分割インストール</a>: <a href="./sys_req_hw.html#large-environment-installation">大規模インストール</a>の土台となるインストール方法。
</div>
</div>
</div>
</div>
</div>
</div>

  </li>
  <li>
    <p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <a href="./install_text_mode.html">テキストモードインストール</a>: ウェブインタフェースを用いて<code>pe.conf</code>ファイルを作成するか、PEインストールtarballで提供されているファイル例を使用します。
</div>
</div>
</div>
</div>
</div>
</div> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> このインストール方法の詳細については、テキストモードインストールの概要を参照してください。 
</div>
</div>
</div>
</div>
</div>
</div>

  </li>
</ul>
<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> 「<a href="./sys_req_hw.html">システム要件</a>」で、ハードウェア関連の仕様を確認します。
</div>
</div>
</div>
</div>
</div>
</div>


<blockquote>
  <p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <strong>注意</strong>: インストールを開始する前に、「<a href="#about-puppet-enterprise-components">Enterpriseのコンポーネント</a>」を読んで、Puppet Enterpriseのインストールに関連する部分をよく理解しておくとよいでしょう。
</div>
</div>
</div>
</div>
</div>
</div>

</blockquote>

<h2 id="about-puppet-enterprise-components">Puppet Enterpriseのコンポーネントについて</h2>

<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> インストールを開始する前に、Puppet Enterpriseを構成するサービスとコンポーネントをよく理解しておく必要があります。
</div>
</div>
</div>
</div>
</div>
</div>


<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> 詳細については、「<a href="pe/2016.4/pe_architecture_overview.html">PEアーキテクチャ概要</a>」を参照してください。
</div>
</div>
</div>
</div>
</div>
</div>


<h2 id="notes-warnings-and-tips">注意、警告メッセージ、およびヒント</h2>

<h3 id="verifying-your-license">ライセンスを確認する</h3>

<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> Puppet Enterpriseの購入時に受け取った<code>license.key</code>ファイルで、デプロイ可能なノードの台数を確認します。
</div>
</div>
</div>
</div>
</div>
</div> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> Puppet Enterpriseの実行時にログインライセンスの警告メッセージが表示されないようにするには、このファイルを<code>/etc/puppetlabs/license.key</code>としてPuppet masterノードにコピーする必要があります。
</div>
</div>
</div>
</div>
</div>
</div> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> ライセンスキーファイルがない場合は、<a href="mailto:sales@puppet.com">sales@puppet.com</a>宛てにメールで再送付を依頼してください。
</div>
</div>
</div>
</div>
</div>
</div>


<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> Puppet Enterpriseは最大10台のノードまで無料でご利用になれます。
</div>
</div>
</div>
</div>
</div>
</div> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> ノード台数が10台までの場合、ライセンスキーは不要です。
</div>
</div>
</div>
</div>
</div>
</div>


<h3 id="puppet-enterprise-binaries-and-symlinks">Puppet Enterpriseのバイナリおよびシンボリックリンク</h3>

<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> Puppet Enterpriseのバイナリは<code>/opt/puppetlabs/bin</code>にインストールされます。
</div>
</div>
</div>
</div>
</div>
</div> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> すべてのユーザーが主要なPuppetツールを使えるよう、インストーラによって、<code>facter</code>、<code>puppet</code>、<code>pe-man</code>、<code>r10k</code>、<code>hiera</code>、および<code>mco</code>バイナリのシンボリックリンクが<code>/usr/local/bin</code>に自動的に作成されます。
</div>
</div>
</div>
</div>
</div>
</div> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> シンボリックリンクは、<code>/usr/local/bin</code>が書き込み可能な場合にのみ作成されます。
</div>
</div>
</div>
</div>
</div>
</div>


<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> AIXおよびSolaris 10/11をお使いの場合は、デフォルトパスに<code>/usr/local/bin</code>を追加する必要があります。
</div>
</div>
</div>
</div>
</div>
</div>


<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> Mac OS X agentを実行している場合、agentのカタログを適用してPuppetが正常に実行されるまで、シンボルリンクは作成されません。
</div>
</div>
</div>
</div>
</div>
</div>


<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> Puppet EnterpriseがインストールされているPostgreSQLサーバー、PuppetDB、Rubyパッケージと通信するコンポーネントなど、上記以外のPuppet Enterpriseコンポーネントが提供するバイナリのシンボリックリンクは作成されません。
</div>
</div>
</div>
</div>
</div>
</div> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> これらのバイナリをデフォルトの<code>$PATH</code>に追加するには、プロファイルに手動で追加するか、または<code>PATH=/opt/puppetlabs/puppet/bin:/opt/puppetlabs/server/bin:$PATH;export PATH</code>を実行します。
</div>
</div>
</div>
</div>
</div>
</div>


<h4 id="disabling-binaries-and-symlinks">バイナリおよびシンボリックリンクの無効化</h4>

<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> Hieraを経由するシンボリックリンクの作成を無効化することができます。
</div>
</div>
</div>
</div>
</div>
</div>


<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <a href="/pe/2016.4/config_intro.html#configure-settings-with-hiera">デフォルトのHieraファイル</a>を経由するシンボリックリンクを無効化するには、以下を追加します。
</div>
</div>
</div>
</div>
</div>
</div>


<pre><code>puppet_enterprise::manage_symlinks: false
</code></pre>

<h2 id="installing-agents">Agentのインストール</h2>

<p> </p>
<div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> <div class="real-paragraph"> Agentのインストール方法については、「<a href="/pe/2016.4/install_agents.html">PE Agentのインストール</a>」を参照してください。
</div>
</div>
</div>
</div>
</div>
</div>

</div>
